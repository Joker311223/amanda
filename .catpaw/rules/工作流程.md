---
ruleType: Always
description: 工作流程
globs: 
---

### **M-Hub 核心工作流程规则**

#### **规划模式(Plan Mode)**
```
开始 → 读取Project Base Files → 读取Task Progress Files → 检查文件完整性
    → 文件不完整：创建缺失文件 → 创建执行计划 → 记录计划
    → 文件完整：验证项目上下文 → 评估当前进展 → 制定策略 → 呈现方案
```

#### **执行模式(Act Mode)**
```
开始 → 检查Project Base Files → 检查Task Progress Files → 更新activeContext.md 
→ 执行任务 → 更新progress.md → 检查Base Files是否需要更新
    → 需要：更新Base Files → 任务完成
    → 不需要：任务完成
```

### **文件管理规则**

#### **文件分类**
- **Base Files**：projectbrief.md、productContext.md、systemPatterns.md、techContext.md
  - 记录稳定、长期不变的项目信息
  - 更新频率低
- **Progress Files**：activeContext.md、progress.md
  - 记录动态、实时的工作信息
  - 更新频率高

#### **更新触发条件**
- **Base Files更新时机**：
  - 项目范围或需求变更
  - 架构决策变更
  - 技术栈演进
  - 业务背景变化
  - 用户请求update memory bank（必须检查所有文件）
- **Progress Files更新时机**：
  - 完成任务或功能后
  - 切换工作焦点时
  - 发现新模式或洞察时
  - 遇到阻碍或问题时
  - 重大调试或问题解决后

### **最佳实践规范**

#### **操作准则**
- **精确性**：保持信息准确性，对AI效果至关重要
- **同步性**：确保Base Files和Progress Files保持连贯
- **及时性**：Progress Files更新不应延迟
- **选择性**：Base Files更新应谨慎，保持稳定性
- **决策记录**：解释变更原因

#### **特殊场景**
- 用户请求"update memory bank"时：
  - 必须检查所有Base Files（即使不需要更新）
  - 重点检查activeContext.md和progress.md
  - 确保文件类型间的一致性
  - 更新需要澄清的文件
  - 在Progress Files中记录审查过程

这些规则确保了Memory Bank系统的有效维护，使AI能够准确理解项目上下文并提供精准的开发辅助。