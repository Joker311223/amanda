---
ruleType: Model Request
description: 更新规则
globs: 
---

### **Memory Bank 文档更新规范**

本文档描述如何有效维护和管理 Memory Bank 系统，区分 base files 和 progress files 的更新规则。

## **文档更新**

### **更新触发条件**

#### **Base Files 更新（较少发生）**：

1. 项目范围或需求变更
2. 架构决策制定
3. 技术栈演进
4. 业务背景变化
5. 用户请求 **update memory bank**（必须检查所有文件）

#### **Progress Files 更新（频繁发生）**：

1. 完成任务或功能后
2. 切换工作焦点时
3. 发现新模式或洞察时
4. 遇到阻碍或面临问题时
5. 重大调试或问题解决后

### **更新流程**

```
flowchart TD
Start[更新流程]
Start --> Assess[评估更新范围]

Assess --> BaseUpdate{Base Files 需要更新？}
Assess --> ProgressUpdate{Progress Files 需要更新？}

BaseUpdate -->|是| ReviewBase[检查 Project Base Files]
BaseUpdate -->|否| SkipBase[跳过 Base Files]

ProgressUpdate -->|是| ReviewProgress[检查 Task Progress Files]
ProgressUpdate -->|否| SkipProgress[跳过 Progress Files]

ReviewBase --> UpdateBase[更新 Base Files]
ReviewProgress --> UpdateProgress[更新 Progress Files]
SkipBase --> UpdateProgress
SkipProgress --> UpdateBase

UpdateBase --> Validate[验证一致性]
UpdateProgress --> Validate
Validate --> Complete[更新完成]
```

### **更新指南**

#### **更新 Base Files 时**：

- **检查所有 base files** 的一致性
- **确保 projectbrief.md 与其他 base files** 之间的对齐
- **谨慎更新** - 仅在基础方面发生变化时更新
- **在 progress files 中记录变更原因**

#### **更新 Progress Files 时**：

- **工作会话后立即更新 activeContext.md**
- **完成功能或里程碑后更新 progress.md**
- **保持历史上下文** - 不要替换，而是添加到故事中
- **做决策时参考 base files**

#### **特殊情况 - 完整 Memory Bank 更新**：

当用户请求 **update memory bank** 时：

1. 检查所有 base files（即使不需要更新）
2. 检查所有 progress files（重点关注 activeContext.md 和 progress.md）
3. 确保文件类型之间的一致性
4. 更新任何需要澄清的文件
5. 在 progress files 中记录审查过程

### **最佳实践**

- **保持精确性** - 准确性对 AI 效果至关重要
- **保持文件同步** - 确保 base files 和 progress files 讲述一个连贯的故事
- **立即更新** - 不要推迟 progress files 的更新
- **谨慎选择** - Base Files 更新要选择性进行，稳定性很重要
- **记录决策** - 解释为什么做出这些变更
