# 快乐分兑换系统 - 测试指南

## 快速测试步骤

### 方法1：使用Debug模式（推荐）

1. **打开Router页面并启用Debug模式**
   - 访问URL：`/pages/router/index?debug=true`
   - 页面右下角会出现两个红绿按钮

2. **一键完成所有课程**
   - 点击绿色的"✅ 完成全部"按钮
   - 确认弹窗中选择"确定"
   - 系统会自动完成所有14个课程和所有作业
   - 计算并设置总经验值

3. **查看完成提示条**
   - 完成后，页面底部会弹出紫色提示条
   - 显示"恭喜！你已完成所有课程"
   - 显示可用积分和可兑换快乐分数量

4. **点击"去兑换"按钮**
   - 跳转到快乐分兑换页面
   - 页面显示当前快乐分和可用积分

### 方法2：手动完成课程

1. 逐个完成所有14个课程
2. 完成所有配套作业
3. 系统自动检测完成状态
4. 显示完成提示条

## 兑换页面测试

### 基本功能测试

1. **滑块选择**
   - 拖动滑块改变兑换数量
   - 实时显示消耗积分和获得快乐分

2. **快速选择按钮**
   - 点击"25%"：选择最大可兑换数量的25%
   - 点击"50%"：选择最大可兑换数量的50%
   - 点击"75%"：选择最大可兑换数量的75%
   - 点击"全部"：选择最大可兑换数量

3. **兑换预览**
   - 紫色卡片显示消耗积分和获得快乐分
   - 实时更新

### 动画测试

1. **点击"立即兑换"按钮**
   - 屏幕变暗（半透明黑色覆盖层）
   - 中央出现白色卡片，显示✨和兑换数量

2. **第一阶段动画（800ms）**
   - 卡片缩放到0.5倍
   - 卡片旋转360度
   - 创建视觉冲击

3. **第二阶段动画（600ms）**
   - 卡片恢复到正常大小
   - 显示成功提示（🎉）
   - 6个粒子从中心向四周飞出
   - 粒子逐渐消失

4. **完成后**
   - 显示成功提示："成功兑换 X 快乐分！"
   - 2秒后自动返回Router页面

## 数据验证

### 兑换前
- 查看当前快乐分（应该是0或之前的值）
- 查看可用积分（应该是完成所有课程和作业的总经验值）

### 兑换后
- 快乐分应该增加（原值 + 兑换数量）
- 积分应该减少（原值 - 消耗积分）
- 数据应该保存到本地存储

## 清空数据

如果需要重新测试，使用Debug模式的"🗑️ 清空记录"按钮：
- 清空所有完成的课程
- 清空所有完成的作业
- 重置经验值为0
- 重置快乐分为0

## 常见问题

### Q: 完成提示条没有显示？
A: 检查是否所有课程和作业都已完成。可以使用Debug模式的"完成全部"按钮快速完成。

### Q: 兑换后数据没有保存？
A: 检查app.js中的saveUserData()方法是否正确实现。

### Q: 动画没有显示？
A: 确保使用的是支持wx.createAnimation()的微信小程序版本。

### Q: 返回后提示条还在显示？
A: 这是正常的，因为数据已经更新。可以关闭提示条或刷新页面。

## 性能测试

- 兑换动画总时长：约1.4秒
- 页面加载时间：应该在1秒以内
- 动画帧率：应该保持60fps

## 浏览器兼容性

- 微信小程序基础库版本：2.0.0+
- 支持所有现代微信小程序版本

## 测试清单

- [ ] Debug模式可以正常启用
- [ ] 一键完成所有课程功能正常
- [ ] 完成提示条正常显示
- [ ] 提示条中的数据计算正确
- [ ] 点击"去兑换"可以跳转到兑换页面
- [ ] 兑换页面显示正确的数据
- [ ] 滑块选择功能正常
- [ ] 快速选择按钮功能正常
- [ ] 兑换预览实时更新
- [ ] 兑换动画流畅播放
- [ ] 成功提示正确显示
- [ ] 兑换后自动返回
- [ ] 数据正确保存
- [ ] 清空记录功能正常
