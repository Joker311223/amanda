<view class="page-container">
  <!-- å¯çˆ±çš„é¡¶éƒ¨è£…é¥° -->
  <view class="top-decoration">
    <view class="cloud cloud-1">â˜ï¸</view>
    <view class="cloud cloud-2">â˜ï¸</view>
    <view class="sun">â˜€ï¸</view>
  </view>

  <!-- è¿›åº¦å±•ç¤º - å°ç«ç®­ -->
  <view class="progress-rocket">
    <view class="rocket-container" style="left: {{progressPercent}}%">
      <view class="rocket">ğŸš€</view>
      <view class="rocket-fire">ğŸ”¥</view>
    </view>
    <view class="progress-track">
      <view class="progress-fill" style="width: {{progressPercent}}%"></view>
      <view class="track-start">ğŸ </view>
      <view class="track-end">ğŸ†</view>
    </view>
    <view class="progress-text">å·²å®Œæˆ {{completedCount}}/{{totalCount}} å…³</view>
  </view>

  <!-- å­¦ä¹ è·¯çº¿å›¾ - æ¸¸æˆå…³å¡é£æ ¼ -->
  <scroll-view class="roadmap-scroll" scroll-y="true">
    <view class="roadmap-path">
      <!-- è¯¾ç¨‹å…³å¡ -->
      <view
        class="level-item {{item.courseCompleted ? 'completed' : ''}} {{item.current ? 'current' : ''}} {{item.locked ? 'locked' : ''}}"
        wx:for="{{courses}}"
        wx:key="id"
        style="{{item.position}}"
      >
        <!-- å…³å¡å›¾æ ‡ -->
        <view class="level-icon" bindtap="onCourseClick" data-course="{{item}}">
          <view class="icon-bg">
            <text class="level-emoji">{{item.emoji}}</text>
          </view>
          <!-- è¯¾ç¨‹å®Œæˆæ ‡è®° -->
          <view wx:if="{{item.courseCompleted}}" class="complete-badge course-badge">
            <text class="badge-icon">ğŸ“š</text>
          </view>
          <!-- ä½œä¸šå®Œæˆæ ‡è®° -->
          <view wx:if="{{item.assignmentCompleted}}" class="complete-badge assignment-badge">
            <text class="badge-icon">âœï¸</text>
          </view>
          <!-- é”å®šæ ‡è®° -->
          <view wx:if="{{item.locked}}" class="lock-badge">
            <text class="lock-icon">ğŸ”’</text>
          </view>
          <!-- å½“å‰å…³å¡åŠ¨ç”» -->
          <view wx:if="{{item.current}}" class="current-glow"></view>
        </view>

        <!-- å…³å¡ä¿¡æ¯æ°”æ³¡ -->
        <view class="level-bubble">
          <view class="bubble-content">
            <text class="level-number">ç¬¬{{item.index}}å…³</text>
            <text class="level-title">{{item.title}}</text>

            <!-- è¯¾ç¨‹å’Œä½œä¸šæŒ‰é’® -->
            <view class="action-buttons">
              <view
                class="action-btn course-btn {{item.courseCompleted ? 'btn-completed' : ''}}"
                bindtap="onCourseClick"
                data-course="{{item}}"
                catchtap="stopPropagation"
              >
                <text class="btn-icon">ğŸ“š</text>
                <text class="btn-text">{{item.courseCompleted ? 'å·²å­¦' : 'å­¦ä¹ '}}</text>
              </view>
              <view
                class="action-btn assignment-btn {{item.assignmentCompleted ? 'btn-completed' : ''}}"
                bindtap="onAssignmentClick"
                data-course="{{item}}"
                catchtap="stopPropagation"
              >
                <text class="btn-icon">âœï¸</text>
                <text class="btn-text">{{item.assignmentCompleted ? 'å·²åš' : 'ä½œä¸š'}}</text>
              </view>
            </view>
          </view>
          <view class="bubble-tail"></view>
        </view>

        <!-- æ˜Ÿæ˜Ÿå¥–åŠ± -->
        <view wx:if="{{item.courseCompleted && item.assignmentCompleted}}" class="stars-reward">
          <text class="star">â­</text>
          <text class="star">â­</text>
          <text class="star">â­</text>
        </view>
      </view>

      <!-- ç»ˆç‚¹åŸå ¡ -->
      <view class="finish-castle">
        <view class="castle-icon">ğŸ°</view>
        <view class="castle-text">å­¦ä¹ ç‹å›½</view>
        <view class="castle-stars">
          <text class="twinkle">âœ¨</text>
          <text class="twinkle">âœ¨</text>
          <text class="twinkle">âœ¨</text>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- é¼“åŠ±å°è´´å£« -->
  <view class="encouragement-tip" wx:if="{{showTip}}">
    <view class="tip-character">{{tipCharacter}}</view>
    <view class="tip-bubble">
      <text class="tip-text">{{tipText}}</text>
    </view>
  </view>
</view>
