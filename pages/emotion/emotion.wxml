<view class="page-container">
  <!-- ç»éªŒå€¼æ˜¾ç¤º -->
  <view class="experience-badge">
    <text class="star">â­</text>
    <text>{{totalExperience}}åˆ†</text>
  </view>

  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-card card">
      <view class="card-header">
        <text>æˆ‘çš„ç¬”è®°</text>
      </view>
    </view>
  </view>

  <!-- æ·»åŠ ç¬”è®°æŒ‰é’® -->
  <view class="add-note-section">
    <view class="add-note-card" bindtap="addNote">
      <view class="add-note-icon">âœï¸</view>
      <text class="add-note-text">æ·»åŠ æ–°ç¬”è®°</text>
    </view>
  </view>

  <!-- ç¬”è®°åˆ—è¡¨ -->
  <view class="notes-list" wx:if="{{notes.length > 0}}">
    <view
      class="note-item"
      wx:for="{{notes}}"
      wx:key="id"
    >
      <view class="note-content">
        <text class="note-text">{{item.content}}</text>
        <view class="note-time">{{item.updateTime || item.createTime}}</view>
      </view>
      <view class="note-actions">
        <view class="action-btn edit-btn" bindtap="editNote" data-id="{{item.id}}">
          <text class="action-icon">âœï¸</text>
        </view>
        <view class="action-btn delete-btn" bindtap="deleteNote" data-id="{{item.id}}">
          <text class="action-icon">ğŸ—‘ï¸</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{notes.length === 0}}" class="empty-state">
    <view class="empty-icon">ğŸ’­</view>
    <text class="empty-text">è¿˜æ²¡æœ‰ç¬”è®°ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ ä½ çš„ç¬¬ä¸€æ¡ç¬”è®°å§ï¼</text>
  </view>

  <!-- ç¬”è®°ç¼–è¾‘å¼¹çª— -->
  <view class="note-modal" wx:if="{{showModal}}" bindtap="closeModal">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">{{isEditing ? 'ç¼–è¾‘ç¬”è®°' : 'æ·»åŠ ç¬”è®°'}}</text>
        <view class="modal-close" bindtap="closeModal">
          <text>âœ•</text>
        </view>
      </view>

      <view class="modal-body">
        <textarea
          class="note-textarea"
          placeholder="è¯·è¾“å…¥ç¬”è®°å†…å®¹..."
          value="{{currentNoteContent}}"
          bindinput="onNoteInput"
          maxlength="500"
          auto-focus
        />
        <view class="char-count">{{currentNoteContent.length}}/500</view>
      </view>

      <view class="modal-footer">
        <button class="modal-btn" bindtap="closeModal">å–æ¶ˆ</button>
        <button class="modal-btn" type="primary" bindtap="saveNote">ä¿å­˜</button>
      </view>
    </view>
  </view>
</view>
