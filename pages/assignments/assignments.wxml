<view class="page-container">
  <!-- ç»éªŒå€¼æ˜¾ç¤º -->
  <view class="experience-badge">
    <text class="star">â­</text>
    <text>{{totalExperience}}åˆ†</text>
  </view>

  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-card card">
      <view class="card-header">
        <text>ä½œä¸šä¸­å¿ƒ</text>
      </view>
    </view>
  </view>

  <!-- ç­›é€‰å™¨ -->
  <view class="filter-section">
    <view class="filter-tabs">
      <view
        class="filter-tab {{currentFilter === 'all' ? 'active' : ''}}"
        bindtap="setFilter"
        data-filter="all"
      >
        å…¨éƒ¨ ({{assignments.length}})
      </view>
      <view
        class="filter-tab {{currentFilter === 'available' ? 'active' : ''}}"
        bindtap="setFilter"
        data-filter="available"
      >
        å¾…å®Œæˆ ({{availableCount}})
      </view>
      <view
        class="filter-tab {{currentFilter === 'completed' ? 'active' : ''}}"
        bindtap="setFilter"
        data-filter="completed"
      >
        å·²å®Œæˆ ({{completedCount}})
      </view>
      <view
        class="filter-tab {{currentFilter === 'locked' ? 'active' : ''}}"
        bindtap="setFilter"
        data-filter="locked"
      >
        æœªè§£é” ({{lockedCount}})
      </view>
    </view>
  </view>

  <!-- ä½œä¸šåˆ—è¡¨ -->
  <view class="assignments-section">
    <view
      class="assignment-card {{item.status === 'locked' ? 'locked' : ''}}"
      wx:for="{{filteredAssignments}}"
      wx:key="id"
      bindtap="onAssignmentClick"
      data-assignment-id="{{item.id}}"
    >
      <view class="assignment-header">
        <view class="assignment-icon {{item.status}}">
          <text wx:if="{{item.status === 'completed'}}">âœ…</text>
          <text wx:elif="{{item.status === 'available'}}">ğŸ“</text>
          <text wx:else>ğŸ”’</text>
        </view>

        <view class="assignment-info">
          <text class="assignment-title">{{item.title}}</text>
          <text class="assignment-category">{{item.category}}</text>
        </view>

        <view class="assignment-status">
          <view wx:if="{{item.status === 'completed'}}" class="status-tag status-completed">
            å·²å®Œæˆ
          </view>
          <view wx:elif="{{item.status === 'available'}}" class="status-tag status-available">
            å¾…å®Œæˆ
          </view>
          <view wx:else class="status-tag status-locked">
            æœªè§£é”
          </view>
        </view>
      </view>

      <view class="assignment-meta">
        <text wx:if="{{item.courseId}}" class="related-course">
          å…³è”è¯¾ç¨‹ï¼š{{getCourseTitle(item.courseId)}}
        </text>
        <text class="due-date">æˆªæ­¢æ—¥æœŸï¼š{{item.dueDate}}</text>
      </view>

      <view class="assignment-actions">
        <button
          wx:if="{{item.status === 'available'}}"
          class="btn btn-primary assignment-btn"
          bindtap="startAssignment"
          data-assignment-id="{{item.id}}"
          catchtap="true"
        >
          å¼€å§‹ä½œä¸š
        </button>

        <button
          wx:if="{{item.status === 'completed'}}"
          class="btn btn-outline assignment-btn"
          bindtap="viewAssignment"
          data-assignment-id="{{item.id}}"
          catchtap="true"
        >
          æŸ¥çœ‹è¯¦æƒ…
        </button>

        <button
          wx:if="{{item.status === 'locked'}}"
          class="btn btn-disabled assignment-btn"
          disabled
        >
          æœªè§£é”
        </button>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{filteredAssignments.length === 0}}" class="empty-state">
    <view class="empty-icon">ğŸ“</view>
    <text class="empty-text">æš‚æ— {{getFilterText(currentFilter)}}ä½œä¸š</text>
  </view>
</view>
