<view class="page-container">
  <!-- 经验值显示 -->
  <view class="experience-badge">
    <text class="star">⭐</text>
    <text>{{totalExperience}}分</text>
  </view>
  <!-- 搜索栏 -->
  <view class="search-section">
    <view class="search-bar">
      <view class="search-icon">🔍</view>
      <input class="search-input" placeholder="Search..." value="{{searchKeyword}}" bindinput="onSearchInput" />
    </view>
  </view>
  <!-- 快捷操作 -->
  <view class="quick-actions-section">
    <view class="quick-actions-card card">
      <view class="card-header">
        <text>查看课程回顾和作业回顾</text>
      </view>
      <view class="card-content">
        <view class="quick-buttons">
          <button class="btn {{nowPage==='课程回顾'? 'btn-primary' : 'btn-outline'}}" bindtap="goToCourseReview">
            课程回顾
          </button>
          <button class="btn {{nowPage==='作业回顾'? 'btn-primary' : 'btn-outline'}}" bindtap="goToAssignmentReview">
            作业回顾
          </button>
        </view>
      </view>
    </view>
  </view>
  <!-- 课程回顾 -->
  <view wx:if="{{nowPage==='课程回顾'}}" class="courses-section">
    <view class="course-card {{item.status === 'locked' ? 'locked' : ''}}" wx:for="{{filteredCourses}}" wx:key="id" bindtap="onCourseClick" data-course-id="{{item.id}}">
      <view class="course-header">
        <view class="course-icon {{item.status}}">
          <image wx:if="{{item.status === 'completed'}}" src="/images/xuexi-wancheng.svg" />
          <image wx:elif="{{item.status === 'available'}}" src="/images/xuexi-daikaifa.svg" />
          <image wx:else src="/images/xuexi-suoding.svg" />
        </view>
        <view class="course-info">
          <view class="course-meta">
            <image class="course-image" src="{{item.icon}}" data-course-id="{{item.id}}" />
            <view class="course-time"><text>{{item.title}}</text></view>
          </view>
        </view>
        <view class="course-actions">
          <view wx:if="{{item.status === 'completed'}}" class="status-tag status-completed">
            <text class="status-text">可学习</text>
          </view>
          <view wx:elif="{{item.status === 'available'}}" class="status-tag status-available">
            <text class="status-text">待学习</text>
          </view>
          <view wx:else class="status-tag status-locked">
            <text class="status-text">未解锁</text>
          </view>
          <view class="zuoye-right">
            <image wx:if="{{item.status!=='completed'}}" src="/images/xuexi-icon.svg" class="xuexi-icon" data-course-id="{{item.id}}" />
            <image wx:else src="/images/chongbo-icon.svg" class="xuexi-icon" data-course-id="{{item.id}}" />
            <text class="xuexi-text">{{item.duration}}</text>
          </view>
        </view>
         <view class="course-experience">
          <text class="experience-text">35分</text>
        </view>
      </view>
    </view>
  </view>
  <!-- 作业列表 -->
  <view wx:if="{{nowPage==='作业回顾'}}" class="courses-section">
    <view class="assignment-card {{item.status === 'locked' ? 'locked' : ''}}" wx:for="{{filteredAssignments}}" wx:key="id" data-zuoye-id="{{item.id}}" data-zuoye-status="{{item.status}}" bindtap="unionJump">
      <!-- 左侧状态图标 -->
      <!-- 中间内容区域 -->
      <view class="assignment-content">
        <!-- 标题 -->
        <view class="assignment-title">
          <view class="assignment-status-icon">
            <image wx:if="{{item.status === 'completed'}}" src="/images/xuexi-wancheng.svg" mode="aspectFit" />
            <image wx:elif="{{item.status === 'available'}}" src="/images/xuexi-daikaifa.svg" mode="aspectFit" />
            <image wx:else src="/images/xuexi-suoding.svg" mode="aspectFit" />
          </view>
          <text class="assignment-title-text">{{item.title}}</text>
        </view>
        <!-- 按钮组 -->
        <view class="assignment-buttons">
          <!-- 已完成按钮 -->
          <image src="/images/yiwancheng.svg" wx:if="{{item.status === 'completed'}}" class="assignment-btn-img" />
          <!-- 查看作业按钮 -->
          <image src="/images/chakanzuoye.svg" wx:if="{{item.status === 'completed'}}" class="assignment-btn-img"  />
          <!-- 待打卡按钮 -->
          <image src="/images/daidaka.svg" wx:if="{{item.status === 'available'}}" class="assignment-btn-img" />
          <!-- 开始学习 -->
          <image src="/images/kaishixuexi.svg" wx:if="{{item.status === 'available'}}" class="assignment-btn-img"  />
          <!-- 未解锁按钮 -->
          <image src="/images/weijiesuo.svg" wx:if="{{item.status === 'locked'}}" class="assignment-btn-img" />
        </view>
      </view>
      <!-- 右侧经验值 -->
      <view wx:if="{{item.status !== 'completed'}}" class="assignment-experience">
        <image class="star-icon" src="/images/xingxing.svg" mode="aspectFit" />
        <view class="experience-value">
          <text class="experience-number">20</text>
          <text class="experience-unit">分</text>
        </view>
      </view>
       <view class="course-experience">
          <text class="experience-text">20分</text>
        </view>
    </view>
  </view>
  <!-- 空状态 -->
  <view wx:if="{{nowPage==='课程回顾' && filteredCourses.length === 0}}" class="empty-state">
    <view class="empty-icon">📚</view>
    <text class="empty-text">没有找到相关课程</text>
  </view>
  <view wx:if="{{nowPage==='作业回顾' && filteredAssignments.length === 0}}" class="empty-state">
    <view class="empty-icon">📝</view>
    <text class="empty-text">没有找到相关作业</text>
  </view>
</view>