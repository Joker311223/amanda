<view class="page-container">
  <!-- ç»éªŒå€¼æ˜¾ç¤º -->
  <view class="experience-badge">
    <text class="star">â­</text>
    <text>{{totalExperience}}åˆ†</text>
  </view>

  <!-- åˆ†ç±»ç­›é€‰ -->
  <view class="category-section">
    <scroll-view class="category-scroll" scroll-x="true" >
      <view class="category-tabs">
        <view
          class="category-tab {{currentCategory === 'all' ? 'active' : ''}}"
          bindtap="setCategory"
          data-category="all"
        >
          å…¨éƒ¨ ({{skillCards.length}})
        </view>
        <view
          class="category-tab {{currentCategory === 'æƒ…ç»ªç®¡ç†' ? 'active' : ''}}"
          bindtap="setCategory"
          data-category="æƒ…ç»ªç®¡ç†"
        >
          æƒ…ç»ªç®¡ç† (3)
        </view>
        <view
          class="category-tab {{currentCategory === 'æ­£å¿µ' ? 'active' : ''}}"
          bindtap="setCategory"
          data-category="æ­£å¿µ"
        >
          æ­£å¿µ (4)
        </view>
        <view
          class="category-tab {{currentCategory === 'ç—›è‹¦è€å—' ? 'active' : ''}}"
          bindtap="setCategory"
          data-category="ç—›è‹¦è€å—"
        >
          ç—›è‹¦è€å— (13)
        </view>
        <view
          class="category-tab {{currentCategory === 'æƒ…ç»ªè°ƒèŠ‚' ? 'active' : ''}}"
          bindtap="setCategory"
          data-category="æƒ…ç»ªè°ƒèŠ‚"
        >
          æƒ…ç»ªè°ƒèŠ‚ (3)
        </view>
        <view
          class="category-tab {{currentCategory === 'äººé™…æ•ˆèƒ½' ? 'active' : ''}}"
          bindtap="setCategory"
          data-category="äººé™…æ•ˆèƒ½"
        >
          äººé™…æ•ˆèƒ½ (5)
        </view>
      </view>
    </scroll-view>
  </view>

  <!-- æŠ€èƒ½å¡ç‰‡ç½‘æ ¼ -->
  <view class="cards-section">
    <view class="cards-grid">
      <view
        class="skill-card"
        wx:for="{{filteredCards}}"
        wx:key="id"
        bindtap="viewSkillCard"
        data-card-id="{{item.id}}"
      >
        <image class="skill-card-bg" src="/images/tool-icon-jineng.svg" mode="aspectFit"></image>
        <view class="skill-card-content">
          <text class="skill-card-title">{{item.title}}</text>
          <text class="skill-card-category">{{item.category}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:if="{{filteredCards.length === 0}}" class="empty-state">
    <view class="empty-icon">ğŸ› ï¸</view>
    <text class="empty-text">æš‚æ— ç›¸å…³æŠ€èƒ½å¡ç‰‡</text>
  </view>
  <!-- å›¾ç‰‡é¢„è§ˆå¼¹çª— -->
  <view class="image-preview-modal {{showImagePreview ? 'show' : ''}}" bindtap="closeImagePreview">
    <view class="preview-container" catchtap="preventTap">
      <!-- å…³é—­æŒ‰é’® -->
      <view class="close-btn" bindtap="closeImagePreview">
        <text>âœ•</text>
      </view>

      <!-- å›¾ç‰‡è½®æ’­ -->
      <swiper
        class="image-swiper"
        current="{{currentImageIndex}}"
        bindchange="onImageChange"
        indicator-dots="{{currentImages.length > 1}}"
        indicator-color="rgba(255, 255, 255, 0.5)"
        indicator-active-color="#ffffff"
      >
        <swiper-item wx:for="{{currentImages}}" wx:key="index">
          <scroll-view
            class="image-scroll-view"
            scroll-x
            scroll-y
            enable-flex
          >
            <view class="image-container" bindtap="onImageTap">
              <image
                class="preview-image"
                src="{{item}}"
                mode="widthFix"
                show-menu-by-longpress
                bindload="onImageLoad"
              />
            </view>
          </scroll-view>
        </swiper-item>
      </swiper>

      <!-- å›¾ç‰‡è®¡æ•°å™¨ -->
      <view class="image-counter" wx:if="{{currentImages.length > 1}}">
        <text>{{currentImageIndex + 1}} / {{currentImages.length}}</text>
      </view>
    </view>
  </view>
</view>
